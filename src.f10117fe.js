parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"nqmn":[function(require,module,exports) {
"use strict";function e(e){var o,r=e.Symbol;return"function"==typeof r?r.observable?o=r.observable:(o=r("observable"),r.observable=o):o="@@observable",o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"KzwE":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var d,o=t(require("./ponyfill.js"));function t(e){return e&&e.__esModule?e:{default:e}}d="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof module?module:Function("return this")();var u=(0,o.default)(d),n=u;exports.default=n;
},{"./ponyfill.js":"nqmn"}],"Bgek":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.attach=k,exports.createStoreObject=exports.combine=g,exports.createApi=x,exports.createDomain=w,exports.createEffect=b,exports.createEvent=v,exports.createNode=d,exports.createStore=y,exports.fromObservable=S,exports.guard=q,exports.merge=_,exports.restoreObject=exports.restoreEvent=exports.restoreEffect=exports.restore=A,exports.sample=N,exports.setStoreName=l,exports.split=j,exports.withRegion=m,exports.version=exports.step=exports.launch=exports.is=exports.forward=exports.clearNode=exports.blocks=exports.Kind=void 0;var e=r(require("symbol-observable"));function r(e){return e&&e.__esModule?e:{default:e}}function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e){return i(e)||u(e)||o(e)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,r){if(e){if("string"==typeof e)return f(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?f(e,r):void 0}}function u(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function i(e){if(Array.isArray(e))return f(e)}function f(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function c(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function s(e){var r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"combine")+"(",t="",n=0;for(var a in e){var o=e[a];if(null!=o&&(r+=t,r+=C(o)?o.compositeName.fullName:o.toString()),25===(n+=1))break;t=", "}return r+=")"}function l(e,r){var t=p(r,V(e));if(e.shortName=r,e.compositeName){var n=e.compositeName;n.path=t.path,n.shortName=t.shortName,n.fullName=t.fullName}else e.compositeName=t}function p(e,r){var t,n,a,o=e;return r?(a=r.compositeName,0===e.length?(t=a.path,n=a.fullName):(t=a.path.concat([e]),n=0===a.fullName.length?e:a.fullName+"/"+e)):(t=0===e.length?[]:[e],n=e),{shortName:o,fullName:n,path:t}}function d(e){for(var{node:r=[],from:t,source:n,parent:a=t||n,to:o,target:u,child:i=o||u,scope:f={},meta:c={},family:s={type:"regular"}}=e,l=be(a),p=be(s.links),d=be(s.owners),m=[],v={},h=0;h<r.length;h++){var y=r[h];y&&(m.push(y),ke(y,v))}for(var g={seq:m,next:be(i),meta:c,scope:f,family:{type:s.type||"crosslink",links:p,owners:d},reg:v},b=0;b<p.length;b++)U(p[b]).push(g);for(var k=0;k<d.length;k++)$(d[k]).push(g);for(var x=0;x<l.length;x++)l[x].next.push(g);return g}function m(e,r){$e={parent:$e,value:e,template:K(e).meta.template||$e&&$e.template};try{return r()}finally{$e=V($e)}}function v(e,r){var t=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return t.create(e,n,n)};t.graphite=d({meta:Xe("event",t,r,e)}),t.create=function(e){return Te(t,e),e},t.watch=re(Le,t),t.map=function(e){var r,n;R(e)&&(r=e,n=e.name,e=e.fn);var a=v(X(t,n),r);return Ze(t,a,"map",e),a},t.filter=function(e){return F(e)?(console.error(".filter(fn) is deprecated, use .filterMap instead"),h(t,e)):er(t,"filter",e.fn,[ce({fn:ye})])},t.filterMap=re(h,t),t.prepend=function(e){var r=v("* → "+t.shortName,{parent:V(t)}),n=Be();return n&&K(r).seq.push(n.upward),Ze(r,t,"prepend",e),We(t,r),r},rr(t,t);var n=Be();return n&&(K(t).meta.nativeTemplate=n),Ue(t)}function h(e,r){return er(e,"filterMap",r,[fe({fn:ye}),ie.defined()])}function y(r,t){function n(e,r){f.off(e),Q(f).set(e,Ke(tr(e,f,"on",1,r)))}var a=de(r),o=de(r),u=Ye("updates"),i=Be();a.after=[{type:"copy",to:o}],i&&i.plain.push(a);var f=c({subscribers:new Map,updates:u,defaultState:r,stateRef:a,getState:function(){var e=Oe();return me(e&&e.reg[a.id]?e.reg[a.id]:a)},setState:function(e){Te({target:f,params:e,defer:1})},reset:function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];for(var n of r)f.on(n,function(){return f.defaultState});return f},on:function(e,r){if(Array.isArray(e))for(var t of e)n(t,r);else n(e,r);return f},off:function(e){var r=Q(f).get(e);return r&&(r(),Q(f).delete(e)),f},map:function(e,r){var t,n,o;R(e)&&(t=e,n=e.name,r=e.firstState,e=e.fn);var u=f.getState(),i=Be();i?o=null:void 0!==u&&(o=e(u,r));var c=y(o,{name:X(f,n),config:t,strict:0}),s=tr(f,c,"map",0,e);return B(c).before=[{type:"map",fn:e,from:a}],i&&(i.plain.includes(a)||s.seq.includes(i.loader)||s.seq.unshift(i.loader)),c}},e.default,function(){return rr(f,{})});return f.graphite=d({scope:{state:a},node:[ie.defined(),le({store:a}),ie.changed({store:o}),le({store:o})],child:u,meta:Xe("store",f,t)}),Qe&&void 0===r&&I("current state can't be undefined, use null instead"),i&&(K(f).meta.nativeTemplate=i),f.watch=f.subscribe=function(e,r){if(!r||!C(e)){F(e)||I("watch requires function handler");var t=Be();return t?t.watch.push({of:a,fn:e}):e(f.getState()),Le(f,e)}return F(r)||I("second argument should be a function"),e.watch(function(e){return r(f.getState(),e)})},ge(f,[u]),Ue(f)}function g(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];var n,a,o;0===r.length&&I("at least one argument required"),Me(r[0],function(e,t){o=e,r=t});var u,i,f=r[r.length-1];if(F(f)?(a=r.slice(0,-1),n=f):a=r,1===a.length){var c=a[0];O(c)||(u=c,i=1)}return i||(u=a,n&&(n=ar(n))),or(Array.isArray(u),u,o,n)}function b(e,r){var t=v(e,r),n=t.defaultConfig.handler||function(){return console.error("no handler used in ".concat(t.getType())),Promise.resolve()};K(t).meta.onCopy=["runner"],K(t).meta.unit=t.kind="effect",t.use=function(e){return n=e,t};var a=t.finally=Ye("finally"),o=t.done=h(a,{named:"done",fn:function(e){var{status:r,params:t,result:n}=e;if("done"===r)return{params:t,result:n}}}),u=t.fail=h(a,{named:"fail",fn:function(e){var{status:r,params:t,error:n}=e;if("fail"===r)return{params:t,error:n}}}),i=t.doneData=o.map({named:"doneData",fn:function(e){var{result:r}=e;return r}}),f=t.failData=u.map({named:"failData",fn:function(e){var{error:r}=e;return r}}),c=d({scope:{getHandler:t.use.getCurrent=function(){return n},finally:a},node:[se({fn:function(e,r,t){var n,{params:a,req:o}=e,{finally:u,getHandler:i}=r,{page:f}=t,c=ur({params:a,req:o,ok:1,anyway:u,page:f}),s=ur({params:a,req:o,ok:0,anyway:u,page:f});try{n=i()(a)}catch(a){return void s(a)}R(n)&&F(n.then)?n.then(c,s):c(n)}})],meta:{op:"fx",fx:"runner",onCopy:["finally"]}});K(t).scope.runner=c,K(t).seq.push(fe({fn:function(e,r,t){return V(t)?{params:e,req:{rs:function(e){},rj:function(e){}}}:e}}),se({fn:function(e,r){var{runner:t}=r;return Te({target:t,params:e,defer:1}),e.params}})),t.create=function(e){var r=function(){var e={};return e.req=new Promise(function(r,t){e.rs=r,e.rj=t}),e.req.catch(function(){}),e}();return Te(t,{params:e,req:r}),r.req};var s=t.inFlight=y(0,{named:"inFlight"}).on(t,function(e){return e+1}).on(a,function(e){return e-1}),l=t.pending=s.map({fn:function(e){return e>0},named:"pending"});return ge(t,[a,o,u,i,f,l,s,c]),t}function k(e){var r,t;Me(e,function(r,n){t=r,e=n});var a,{source:o,effect:u,mapParams:i}=e,f=b(e,t),{runner:c}=K(f).scope,s=function(e,r,t){var{params:n,req:a}=e,{finally:o,effect:u}=r,{a:f,page:c}=t;return Te({target:u,params:{params:i(n,f),req:{rs:ur({params:n,req:a,ok:1,anyway:o,page:c}),rj:ur({params:n,req:a,ok:0,anyway:o,page:c})}},page:c,defer:1})};if(o){var l;O(o)?l=o:(l=g(o),ge(f,[l]));var p=ue({from:"store",store:B(l),to:"a"});a=[se({fn:function(e){return e}}),p,fe({fn:s})],ke(p,c.reg)}else a=[se({fn:s})];return c.scope.effect=u,c.meta.onCopy.push("effect"),(r=c.seq).splice.apply(r,[0,1].concat(n(a))),We(u,f),f}function x(e,r){var t={};return nr(r,function(r,n){var a=t[n]=v(n,{parent:V(e)});e.on(a,r),We(e,a)}),t}function w(e,r){var t=new Set,n=new Set,a=new Set,o=new Set,u=d({family:{type:"domain"}}),i={history:{domains:t,stores:n,effects:a,events:o},graphite:u};u.meta=Xe("domain",i,r,e);var[f,c,s,l]=["onEvent","onEffect","onStore","onDomain"].map(Ye);i.hooks={event:f,effect:c,store:s,domain:l},i.onCreateEvent=fr(f,o,i),i.onCreateEffect=fr(c,a,i),i.onCreateStore=fr(s,n,i),i.onCreateDomain=fr(l,t,i),i.createEvent=i.event=function(e,r){return f(v(e,{parent:i,config:r}))},i.createEffect=i.effect=function(e,r){return c(b(e,{parent:i,config:r}))},i.createDomain=i.domain=function(e,r){return w({name:e,parent:i,config:r})},i.createStore=i.store=function(e,r){return s(y(e,{parent:i,config:r}))},Ue(i);var p=V(i);return p&&(nr(i.hooks,function(e,r){Je({from:e,to:p.hooks[r]})}),p.hooks.domain(i)),i}function S(r){H(r);var t=e.default in r?r[e.default]():r;t.subscribe||I("expect observable to have .subscribe");var n=v(),a=te(He,n,void 0);return t.subscribe({next:n,error:a,complete:a}),n}function N(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];var n,a,o;Me(r[0],function(e,t){o=e,r=t});var u,[i,f,c,s=0]=r;void 0===f&&"source"in i&&("clock"in i&&null==i.clock&&I("config.clock should be defined"),f=i.clock,c=i.fn,s=i.greedy,n=i.target,a=i.name,u=i.sid,i=i.source),void 0===f&&(f=i),a=o||a||i.shortName,i=cr(i),f=cr(f),"boolean"==typeof c&&(s=c,c=null);var l=Be(),p=!!n;n||(O(i)&&O(f)?n=y(c?c(me(B(i)),me(B(f))):me(B(i)),{name:a,sid:u}):(n=v(a),l&&K(n).seq.push(l.loader)));var m=p&&C(n)&&K(n).meta.nativeTemplate;if(O(i))ge(i,[Ge(f,n,{scope:{fn:c,targetTemplate:m},node:[l&&l.loader,!s&&oe({priority:"sampler"}),ue({store:B(i),to:c?"a":"stack"}),c&&fe({fn:he}),l&&p&&l.upward],meta:{op:"sample",sample:"store"}})]);else{var h=de(0),g=de(),b=de();l&&l.plain.push(h,g,b),Ue(d({parent:i,node:[le({store:g}),ue({from:"value",store:1,target:h})],family:{owners:[i,n,f],links:n},meta:{op:"sample",sample:"source"}})),ge(i,[Ge(f,n,{scope:{fn:c,targetTemplate:m},node:[l&&l.loader,le({store:b}),ue({store:h}),ce({fn:function(e){return e}}),!s&&oe({priority:"sampler"}),ue({store:g}),ue({store:b,to:"a"}),c&&fe({fn:ve}),l&&p&&l.upward],meta:{op:"sample",sample:"clock"}})])}return n}function q(e,r){var t={op:"guard"},n="guard";Me(e,function(a,o){a.name&&(n=a.name),t.config=a,[e,r]=o}),r||(e=(r=e).source);var{filter:a,greedy:o,name:u=n}=r,i=r.target||v(u,t.config);return C(e)||(e=g(e)),C(a)?N({source:a,clock:e,target:Ue(d({node:[ce({fn:function(e){var{guard:r}=e;return r}}),fe({fn:function(e){var{data:r}=e;return r}})],child:i,meta:t,family:{owners:[e,a,i],links:i}})),fn:function(e,r){return{guard:e,data:r}},greedy:o,name:u}):(F(a)||I("`filter` should be function or unit"),Ge(e,i,{scope:{fn:a},node:[ce({fn:ye})],meta:t})),i}function _(e){var r=v(s(e,"merge"));return Je({from:e,to:r,meta:{op:"merge"}}),r}function A(e,r,t){if(O(e))return e;if(C(e)){var n,a=V(e);return T(e)&&(n=y(r,{parent:a,name:e.shortName,"ɔ":t}).on(e,function(e,r){return r})),z(e)&&(n=y(r,{parent:a,name:e.shortName,"ɔ":t}).on(e.done,function(e,r){var{result:t}=r;return t})),a&&a.hooks.store(n),n}var o={};return nr(e,function(e,r){o[r]=O(e)?e:y(e,{name:r})}),o}function j(e,r){var t={},n=O(e)?e.updates:e;return nr(r,function(e,r){t[r]=n.filter({fn:e}),n=n.filter({fn:function(r){return!e(r)}})}),t.__=n,t}var E={__proto__:null,store:"store",event:"event",effect:"effect",domain:"domain"};exports.Kind=E;var C=function(e){return(F(e)||R(e))&&"kind"in e},D=function(e){return function(r){return C(r)&&r.kind===e}},O=D("store"),T=D("event"),z=D("effect"),M=D("domain"),P={__proto__:null,unit:C,store:O,event:T,effect:z,domain:M};exports.is=P;var I=function(e){throw Error(e)},R=function(e){return"object"==t(e)&&null!==e},F=function(e){return"function"==typeof e},H=function(e){R(e)||F(e)||I("expect value to be an object")},K=function(e){return e.graphite||e},U=function(e){return e.family.owners},$=function(e){return e.family.links},B=function(e){return e.stateRef},G=function(e){return e.config},J=function(e){return e.ɔ},L=function(e){return e.value},Q=function(e){return e.subscribers},V=function(e){return e.parent},W=function(e,r){return""+e.shortName+r},X=function(e,r){return null==r?W(e," → *"):r},Y=function(){var e=0;return function(){return(++e).toString(36)}},Z=Y(),ee=Y(),re=function(e,r){return e.bind(null,r)},te=function(e,r,t){return e.bind(null,r,t)},ne=function(e,r,t){return{id:ee(),type:e,data:t,hasRef:r}},ae=0,oe=function(e){var{priority:r="barrier"}=e;return ne("barrier",0,{barrierID:++ae,priority:r})},ue=function(e){var{from:r="store",store:t,target:n,to:a=(n?"store":"stack")}=e;return ne("mov","store"===r,{from:r,store:t,to:a,target:n})},ie={defined:function(){return ne("check",0,{type:"defined"})},changed:function(e){var{store:r}=e;return ne("check",1,{type:"changed",store:r})}},fe=te(ne,"compute",0),ce=te(ne,"filter",0),se=te(ne,"run",0),le=function(e){var{store:r}=e;return ue({from:"stack",target:r})},pe={__proto__:null,barrier:oe,mov:ue,check:ie,compute:fe,filter:ce,run:se,update:le};exports.step=pe;for(var de=function(e){return{id:ee(),current:e}},me=function(e){var{current:r}=e;return r},ve=function(e,r,t){var{fn:n}=r,{a:a}=t;return n(e,a)},he=function(e,r,t){var{fn:n}=r,{a:a}=t;return n(a,e)},ye=function(e,r){var{fn:t}=r;return t(e)},ge=function(e,r){for(var t=K(e),n=0;n<r.length;n++){var a=K(r[n]);"domain"!==t.family.type&&(a.family.type="crosslink"),U(a).push(t),$(t).push(a)}},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=[];if(Array.isArray(e))for(var t=0;t<e.length;t++)Array.isArray(e[t])?r.push.apply(r,n(e[t])):r.push(e[t]);else r.push(e);return r.map(K)},ke=function(e,r){var t,{hasRef:n,type:a,data:o}=e;n&&(r[(t=o.store).id]=t),"mov"===a&&"store"===o.to&&(r[(t=o.target).id]=t)},xe=null,we=function(e,r){if(!e)return r;if(!r)return e;var t,n=e.v.type===r.v.type;return(n&&e.v.id>r.v.id||!n&&"sampler"===e.v.type)&&(t=e,e=r,r=t),t=we(e.r,r),e.r=e.l,e.l=t,e},Se=[],Ne=0;Ne<5;)Se.push({first:null,last:null,size:0}),Ne+=1;var qe=function(){for(var e=0;e<5;e++){var r=Se[e];if(r.size>0){if(2===e||3===e){r.size-=1;var t=xe.v;return xe=we(xe.l,xe.r),t}1===r.size&&(r.last=null);var n=r.first;return r.first=n.r,r.size-=1,n.v}}},_e=function(e,r,t,n,a){return Ae(0,{a:null,b:null,node:t,parent:n,value:a,page:r},e)},Ae=function(e,r,t){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=je(t),o=Se[a],u={v:{idx:e,stack:r,type:t,id:n},l:0,r:0};2===a||3===a?xe=we(xe,u):(0===o.size?o.first=u:o.last.r=u,o.last=u),o.size+=1},je=function(e){switch(e){case"child":return 0;case"pure":return 1;case"barrier":return 2;case"sampler":return 3;case"effect":return 4;default:return-1}},Ee=new Set,Ce=0,De=null,Oe=function(){return De},Te=function(e,r,t){var n=De,a=null;if(e.target&&(r=e.params,t=e.defer,n="page"in e?e.page:n,e.stack&&(a=e.stack),e=e.target),Array.isArray(e))for(var o=0;o<e.length;o++)_e("pure",n,K(e[o]),a,r[o]);else _e("pure",n,K(e),a,r);t&&Ce||function(){var e,r,t,n,a,o,u={alreadyStarted:Ce,currentPage:De};Ce=1;e:for(;n=qe();){var{idx:i,stack:f,type:c}=n;t=f.node,De=a=f.page,o=(a||t).reg;var s={fail:0,scope:t.scope};e=r=0;for(var l=i;l<t.seq.length&&!e;l++){var p=t.seq[l],d=p.data;switch(p.type){case"barrier":var m=d.barrierID;a&&(m="".concat(a.fullID,"_").concat(m));var v=d.priority;if(l!==i||c!==v){Ee.has(m)||(Ee.add(m),Ae(l,f,v,m));continue e}Ee.delete(m);break;case"mov":var h=void 0;switch(d.from){case"stack":h=L(f);break;case"a":h=f.a;break;case"b":h=f.b;break;case"value":h=d.store;break;case"store":o[d.store.id]||(f.page=a=null,o=t.reg),h=me(o[d.store.id])}switch(d.to){case"stack":f.value=h;break;case"a":f.a=h;break;case"b":f.b=h;break;case"store":o[d.target.id].current=h}break;case"check":switch(d.type){case"defined":r=void 0===L(f);break;case"changed":r=L(f)===me(o[d.store.id])}break;case"filter":r=!ze(s,d,f);break;case"run":if(l!==i||"effect"!==c){Ae(l,f,"effect");continue e}case"compute":f.value=ze(s,d,f)}e=s.fail||r}if(!e)for(var y=0;y<t.next.length;y++)_e("child",a,t.next[y],f,L(f))}Ce=u.alreadyStarted,De=u.currentPage}()};exports.launch=Te;var ze=function(e,r,t){var{fn:n}=r;try{return n(L(t),e.scope,t)}catch(n){console.error(n),e.fail=1}},Me=function(e,r){J(e)&&r(G(e),J(e))},Pe=function(e,r){var t=e.indexOf(r);-1!==t&&e.splice(t,1)},Ie=function(e,r){Pe(e.next,r),Pe(U(e),r),Pe($(e),r)},Re=function(e,r,t){var n;e.next.length=0,e.seq.length=0,e.scope=null;for(var a=$(e);n=a.pop();)Ie(n,e),(r||t&&!e.meta.sample||"crosslink"===n.family.type)&&Re(n,r,t);for(a=U(e);n=a.pop();)Ie(n,e),t&&"crosslink"===n.family.type&&Re(n,r,t)},Fe=function(e){return e.clear()},He=function(e){var{deep:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=0;if(e.ownerSet&&e.ownerSet.delete(e),O(e))Fe(Q(e));else if(M(e)){t=1;var n=e.history;Fe(n.events),Fe(n.effects),Fe(n.stores),Fe(n.domains)}Re(K(e),!!r,t)},Ke=function(e){var r=te(He,e,void 0);return r.unsubscribe=r,r},Ue=function(e){return $e&&ge(L($e),[e]),e},$e=null,Be=function(){return $e&&$e.template},Ge=function(e,r,t){var{node:n,scope:a,meta:o}=t;return Ue(d({node:n,parent:e,child:r,scope:a,meta:o,family:{owners:[e,r],links:r}}))},Je=function(e){var r;Me(e,function(t,n){r=t,e=n});var{from:t,to:n,meta:a={op:"forward"}}=e;return t&&n||I("from and to fields should be defined"),r&&(a.config=r),Ke(Ue(d({parent:t,child:n,meta:a,family:{}})))},Le=function(e,r){return Ke(Ue(d({scope:{fn:r},node:[se({fn:ye})],parent:e,meta:{op:"watch"},family:{owners:e}})))};exports.forward=Je,exports.clearNode=He;var Qe,Ve=function(e,r){return R(e)&&(Ve(G(e),r),null!=e.name&&(R(e.name)?Ve(e.name,r):r.name=e.name),e.loc&&(r.loc=e.loc),(e.sid||null===e.sid)&&(r.sid=e.sid),e.handler&&(r.handler=e.handler),V(e)&&(r.parent=V(e)),"strict"in e&&(r.strict=e.strict),e.named&&(r.named=e.named),Ve(J(e),r)),r},We=function(e,r){V(e)&&V(e).hooks.event(r)},Xe=function(e,r,t,n){var a=Ve({name:n,config:t},{}),o=Z(),{parent:u=null,sid:i=null,strict:f=1,named:c=null}=a,s=c||a.name||("domain"===e?"":o),l=p(s,u);return r.kind=e,r.id=o,r.sid=i,r.shortName=s,r.parent=u,r.compositeName=l,r.defaultConfig=a,r.thru=function(e){return e(r)},r.getType=function(){return l.fullName},Qe=f,{unit:e,name:s,sid:i,named:c}},Ye=function(e){return v({named:e})},Ze=function(e,r,t,n){return Ge(e,r,{scope:{fn:n},node:[fe({fn:ye})],meta:{op:t}})},er=function(e,r,t,n){var a;R(t)&&(a=t,t=t.fn);var o=v(W(e," →? *"),a);return Ge(e,o,{scope:{fn:t},node:n,meta:{op:r}}),o},rr=function(r,t){return t.subscribe=function(e){return H(e),r.watch(function(r){e.next&&e.next(r)})},t[e.default]=function(){return t},t},tr=function(e,r,t,n,a){var o=B(r),u=[ue({store:o,to:"a"}),fe({fn:n?he:ve}),ie.defined(),ie.changed({store:o}),le({store:o})],i=Be();if(i&&(u.unshift(i.loader),u.push(i.upward),O(e))){var f=B(e);i.plain.includes(f)||(i.closure.includes(f)||i.closure.push(f),o.before||(o.before=[]),o.before.push({type:"closure",of:f}))}return Ge(e,r,{scope:{fn:a},node:u,meta:{op:t}})},nr=function(e,r){for(var t in e)r(e[t],t)},ar=function(e){return function(r){return e.apply(void 0,n(r))}},or=function(e,r,t,n){var a=e?function(e){return e.slice()}:function(e){return Object.assign({},e)},o=e?[]:{},u=Be(),i=a(o),f=de(i),c=de(1);f.type=e?"list":"shape",u&&u.plain.push(f,c);var l=y(i,{name:t||s(r)}),p=[ie.defined(),ue({store:f,to:"a"}),ce({fn:function(e,r,t){var{key:n}=r,{a:a}=t;return e!==a[n]}}),ue({store:c,to:"b"}),fe({fn:function(e,r,t){var{clone:n,key:a}=r;t.b&&(t.a=n(t.a)),t.a[a]=e}}),ue({from:"a",target:f}),ue({from:"value",store:0,target:c}),oe({priority:"barrier"}),ue({from:"value",store:1,target:c}),ue({store:f}),n&&fe({fn:n}),ie.changed({store:B(l)})],d=f.before=[];return nr(r,function(e,r){if(O(e)){o[r]=e.defaultState,i[r]=e.getState();var t=Ge(e,l,{scope:{key:r,clone:a},node:p,meta:{op:"combine"}}),n=B(e);d.push({type:"field",field:r,from:n}),u&&(u.plain.includes(n)||t.seq.unshift(u.loader))}else i[r]=o[r]=e}),l.defaultShape=r,f.after=[n?{type:"map",to:B(l),fn:n}:{type:"copy",to:B(l)}],u||(l.defaultState=n?B(l).current=n(i):o),l},ur=function(e){var{params:r,req:t,ok:n,anyway:a,page:o}=e;return function(e){return Te({target:[a,ir],params:[n?{status:"done",params:r,result:e}:{status:"fail",params:r,error:e},{fn:n?t.rs:t.rj,value:e}],defer:1,page:o})}},ir=d({node:[se({fn:function(e){var{fn:r,value:t}=e;r(t)}})],meta:{op:"fx",fx:"sidechain"}}),fr=function(e,r,t){return e.watch(function(e){ge(t,[e]),r.add(e),e.ownerSet||(e.ownerSet=r),V(e)||(e.parent=t)}),ge(t,[e]),function(t){return r.forEach(t),e.watch(t)}},cr=function(e){return C(e)?e:g(e)},sr="20.15.8";exports.version=sr;var lr={__proto__:null,filterChanged:ce({fn:function(e,r){var{state:t}=r;return void 0!==e&&e!==me(t)}}),noop:fe({fn:function(e){return e}})};exports.blocks=lr;
},{"symbol-observable":"KzwE"}],"g5IB":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"DGGC":[function(require,module,exports) {
var process = require("process");
var e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.h=z,exports.handler=$,exports.list=Z,exports.node=G,exports.rec=X,exports.remap=U,exports.route=J,exports.spec=W,exports.text=ae,exports.tree=Y,exports.using=Q,exports.variant=H;var t,n,a,r=require("effector");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return s(e)||c(e)||u(e)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function c(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function s(e){if(Array.isArray(e))return p(e)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function f(e,t){e.cursor[t].prev&&(e.cursor[t].prev.cursor[t].next=e.cursor[t].next),e.cursor[t].next&&(e.cursor[t].next.cursor[t].prev=e.cursor[t].prev),e.queue[t].last===e&&(e.queue[t].last=e.cursor[t].prev),e.queue[t].first===e&&(e.queue[t].first=e.cursor[t].next),e.cursor[t].prev=null,e.cursor[t].next=null}function d(e){var t,n;e.status="active",t=v(e),(n=e).cursor.prev&&(n.cursor.prev.cursor.next=n.cursor.next),n.cursor.next&&(n.cursor.next.cursor.prev=n.cursor.prev),t.last===n&&(t.last=n.cursor.prev),t.first===n&&(t.first=n.cursor.next),n.cursor.prev=null,n.cursor.next=null}function v(e){return e.group.activeChilds[e.priority]}function h(e,t){t.value.active=t.value.pending=e,"active"!==t.status&&d(t)}function m(e,t){if(t.value.active===e)return t.value.pending=e,void("pending"===t.status&&(d(t),v(t).first||f(t.group,t.priority)));var n,a,r,i;"active"===t.status&&(t.status="pending",v(t).first||((r=t.group).queue[i=t.priority].last?(r.cursor[i].prev=r.queue[i].last,r.queue[i].last.cursor[i].next=r,r.queue[i].last=r):r.queue[i].first=r.queue[i].last=r),a=t,(n=v(t)).last?(a.cursor.prev=n.last,n.last.cursor.next=a,n.last=a):n.first=n.last=a),t.value.pending=e,t.group.queue.rafID||(t.group.queue.rafID=re(t.group.queue.execQueue))}function g(e){t("execQueue");var r,i,o=a(),l=0;e:for(;e.props.first||e.tree.first||e.data.first;){if(a()-o>=10){l=1;break e}var u=!!e.props.first;for(u&&t("props");r=e.props.first;){for(;i=r.activeChilds.props.first;){if(a()-o>=10){l=1,n("props");break e}i.runOp(i.value.pending),i.value.active=i.value.pending,d(i)}f(r,"props")}u&&n("props");var c=!!e.tree.first;for(c&&t("tree");r=e.tree.first;){for(;i=r.activeChilds.tree.first;){if(a()-o>=10){l=1,n("tree");break e}i.runOp(i.value.pending),i.value.active=i.value.pending,d(i)}f(r,"tree")}c&&n("tree");var s=!!e.data.first;for(s&&t("data");r=e.data.first;){for(;i=r.activeChilds.data.first;){if(a()-o>=10){l=1,n("data");break e}i.runOp(i.value.pending),i.value.active=i.value.pending,d(i)}f(r,"data")}s&&n("data")}if(n("execQueue"),l)e.rafID=re(e.execQueue);else if(e.rafID=null,e.onDrain){var p=e.onDrain;e.onDrain=null,p()}}function y(e){var{value:t,runOp:n,group:a,priority:r}=e;return{value:{active:t,pending:t},runOp:n,status:"active",priority:r,group:a,cursor:{prev:null,next:null}}}function b(e){var{onComplete:t}=e,n={props:{first:null,last:null},tree:{first:null,last:null},data:{first:null,last:null},rafID:null,execQueue:function(){},onDrain:t};return n.execQueue=g.bind(null,n),n}function w(e){return{ops:[],queue:e,activeChilds:{props:{first:null,last:null},tree:{first:null,last:null},data:{first:null,last:null}},cursor:{props:{prev:null,next:null},tree:{prev:null,next:null},data:{prev:null,next:null}}}}function x(e){var{value:t,group:n,onInit:a,onChange:r,onTerminate:i}=e,o=y({value:t,group:n,runOp:function(e){l.status="A",r(e)},priority:"data"}),l={status:"IA",value:o.value,hooks:{onTerminate:i},ops:{init:y({value:0,group:n,runOp:function(e){l.status="A",a(l.value.active)},priority:"data"}),change:o,terminate:y({value:0,group:n,runOp:function(e){l.status="T",l.hooks.onTerminate(1)},priority:"data"})}};return m(1,l.ops.init),l}function k(e){switch(e.status){case"I":case"T":case"AT":return;case"A":e.status="AT",m(1,e.ops.terminate);break;case"AA":e.status="AT",m(1,e.ops.terminate),m(e.value.active,e.ops.change);break;case"IA":e.status="T",m(0,e.ops.init),e.hooks.onTerminate(0)}}function S(e,t){switch(t.status){case"I":case"T":return;case"A":t.value.active!==e&&(t.status="AA",m(e,t.ops.change));break;case"AA":t.value.active===e?(t.status="A",m(e,t.ops.change)):t.value.pending!==e&&(t.value.pending=e);break;case"IA":t.value.active=t.value.pending=e}}function I(e){return""!==e&&0!==e&&"0"!==e&&(0==e||null==e)}function F(e,t,n){I(n)?e.style.removeProperty("--".concat(t)):e.style.setProperty("--".concat(t),"".concat(n))}function C(e,t,n){I(n)?delete e.style[t]:e.style[t]="".concat(n)}function R(e,t,n){I(n)?delete e.dataset[t]:e.dataset[t]="".concat(n)}function T(e,t,n){if(I(n)){switch(t){case"value":delete e.value;break;case"checked":e.checked=0;break;case"spellcheck":if(0==n)return void e.setAttribute("spellcheck","false")}e.removeAttribute(t)}else{switch(t){case"value":e.value="".concat(n);break;case"checked":e.checked="".concat(n)}e.setAttribute(t,"".concat(n))}}function A(e,t){e.replaceData(0,(e.textContent||"").length,String(t))}function P(e){var{fn:t,state:n={},defer:a=0,name:i="",draft:o,isSvgRoot:l,namespace:u,env:c}=e,s=ce,p=le,f={id:++ie,name:i,plain:[],watch:[],nameMap:{},pages:[],closure:[],childTemplates:[],upward:r.step.filter({fn:function(e,t,n){if(!n.page)return console.error("context lost",n),0;if(!n.page.active)return 0;for(var a=[n.page.template],i=[n.page],o=n.page.parent;o;)i.push(o),a.push(o.template),o=o.parent;return n.node.next.forEach(function(t){var o=t.meta.nativeTemplate;o?a.includes(o)?(0,r.launch)({target:t,params:e,defer:1,page:i[a.indexOf(o)],stack:n}):console.error("context drift",{stack:n,node:t}):(0,r.launch)({target:t,params:e,defer:1,page:null,stack:n})}),0}}),loader:r.step.filter({fn:function(e,t,n){if(n.parent){if(n.page){if(!n.page.active)return 0;if(n.page.template===f)return 1;if(n.page.childSpawns[f.id])n.page.childSpawns[f.id].forEach(function(t){(0,r.launch)({params:e,target:n.node,page:t,defer:1})});else if(t.targetTemplate){for(var a=[n.page],i=n.page.parent;i;)a.push(i),i=i.parent;var o=a.findIndex(function(e){return t.targetTemplate===e.template});(0,r.launch)(-1===o?{params:e,target:n.node,page:null,defer:1}:{params:e,target:n.node,page:a[o],defer:1})}else f.pages.forEach(function(t){t.fullID.startsWith(n.page.fullID)&&(0,r.launch)({params:e,target:n.node,page:t,defer:1})})}else f.pages.forEach(function(t){(0,r.launch)({params:e,target:n.node,page:t,defer:1})});return 0}return 1}}),parent:p};p&&p.childTemplates.push(f);var d=(0,r.createNode)({meta:{template:f}});le=f;var v=ce={template:f,node:d,api:null,trigger:{mount:(0,r.createEvent)(),unmount:(0,r.createEvent)()},draft:o,isSvgRoot:l,namespace:u,env:c};return a?v.deferredInit=function(){var e=ce,a=le;ce=v,le=f,v.deferredInit=null;try{(0,r.withRegion)(d,function(){var e=(0,r.restore)(n);v.api=t(e,v.trigger),f.nameMap=e})}finally{ce=e,le=a}}:(0,r.withRegion)(d,function(){var e=(0,r.restore)(n);v.api=t(e,v.trigger),f.nameMap=e}),ce=s,le=p,f.actor=v,v}function q(e){switch(e.type){case"list":return o(e.current);case"shape":return{...e.current};default:return e.current}}function O(e,t){var{values:n={},parentLeaf:a,mountNode:i,svgRoot:l,leafData:u,opGroup:c,domSubtree:s,hydration:p}=t;function f(e){if(e.before)for(var t of e.before)switch(t.type){case"map":var n=t.from;m[n.id]||(m[n.id]=n),m[e.id].current=t.fn(m[n.id].current);break;case"field":var a=t.from;m[a.id]||(m[a.id]=a),m[e.id].current[t.field]=m[a.id].current;break;case"closure":m[t.of.id]||(m[t.of.id]=t.of)}if(e.after){var r=m[e.id].current;for(var i of e.after){var o=i.to;switch(m[o.id]||(m[o.id]={id:o.id,current:o.current}),i.type){case"copy":m[o.id].current=r;break;case"map":m[o.id].current=i.fn(r)}}}}function d(e,t,n){var a;t.stop=1;try{for(;t.i<e.length;)a=e[t.i],t.i++,a.fn(n[a.of.id].current)}catch(e){console.error(e),t.stop=0}}var v=a?a.spawn:null,h=e.template,m={},g={id:++oe,fullID:"",reg:m,template:h,parent:v,childSpawns:{},active:1};h.pages.push(g);var y={},b={spawn:g,api:y,draft:e.draft,ops:{group:c,domSubtree:s},svgRoot:l,data:u,parentLeaf:a,hydration:p},w=ue;for(var x of(ue=b,v&&(v.childSpawns[h.id]||(v.childSpawns[h.id]=[]),v.childSpawns[h.id].push(g)),g.fullID=v?"".concat(v.fullID,"_").concat(g.id):"".concat(g.id),v&&Object.assign(m,v.reg),h.closure)){var k=x,S=g.parent;e:for(;S;){if(x.id in S.reg){k=S.reg[x.id];break e}S=S.parent}m[x.id]=k}for(var I of h.plain){var F={id:I.id,current:q(I)};m[I.id]=F}for(var C in n){var R=h.nameMap[C].stateRef.id;m[R]={id:R,current:n[C]}}for(var T of h.closure)f(T);for(var A of h.plain)f(A);for(var P={i:0,stop:0};!P.stop;)d(h.watch,P,m);if(v)for(var O in g.childSpawns){var D;O in v.childSpawns||(v.childSpawns[O]=[]),(D=v.childSpawns[O]).push.apply(D,o(g.childSpawns[O]))}if(y.mount=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,r.launch)({target:e.trigger.mount,params:t,defer:n,page:g})},y.unmount=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,r.launch)({target:e.trigger.unmount,params:t,defer:n,page:g})},e.api){var E=function(t){y[t]=function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,r.launch)({target:e.api[t],params:n,defer:a,page:g})}};for(var M in e.api)E(M)}return b.spawn.api=y,b.spawn.leaf=b,b.api.mount({node:i,leaf:b}),ue=w,b}function D(e){var t=function e(t){switch(t.type){case"fragment":switch(t.parent.type){case"EF":case"UF":return t.parent.parent;case"tree":return e(t.parent.parent.parent)}return e(t.parent.parent);case"route":default:return e(t.parent.parent)}}(e);return t?t.value:null}function E(e){if(!e.visible)return null;switch(e.type){case"FE":case"FT":return e.child;case"FR":return E(e.child.child);case"LF":case"RF":case"FF":return M(e.child);case"FTree":return M(e.child.child);case"FRec":case"FRecItem":return M(e.child.child.child);case"FL":var t=e.child.lastChild;if(!t)return null;for(;t;){var n=E(t);if(n)return n;t=t.left}return null;default:return null}}function M(e){for(var t=e.child,n=t.length-1;n>=0;n--){var a=E(t[n]);if(a)return a}return null}function N(e){if("fragment"===e.type)switch(e.parent.type){case"EF":case"UF":return null;case"RecF":case"RecItemF":case"RF":for(var t=e.parent.parent.parent,n=t.parent,a=t.index-1;a>=0;a--){var r=E(n.child[a]);if(r)return r}return N(n);case"FF":for(var i=e.parent,o=i.parent,l=i.index-1;l>=0;l--){var u=E(o.child[l]);if(u)return u}return N(o);case"LF":for(var c=e.parent.left;c;){var s=E(c);if(s)return s;c=c.left}return N(e.parent.parent);case"tree":for(var p=e.parent.parent,f=p.parent,d=p.index-1;d>=0;d--){var v=E(f.child[d]);if(v)return v}return N(f);default:return null}if("route"===e.type){for(var h=e.parent.parent,m=e.parent.index-1;m>=0;m--){var g=h.child[m];if(g){var y=E(g);if(y)return y}}return N(h)}for(var b=e.parent.parent,w=e.parent.index-1;w>=0;w--){var x=b.child[w];if(x){var k=E(x);if(k)return k}}return N(b)}function V(e){var t=N(e);return t?t.value:null}function j(e,t){var{parentBlockFragment:n,leaf:a,node:r,svgRoot:i,values:o}=t;e.childTemplates.forEach(function(e){B({parentBlockFragment:n,leaf:a,node:r,svgRoot:i,values:o,actor:e})})}function B(e){var t,{parentBlockFragment:n,leaf:a,node:i,actor:o,svgRoot:l,values:u}=e,{draft:c}=o,{queue:s}=a.ops.group,p=w(s),f=a.ops.domSubtree,d=f;switch(c.type){case"route":var v={type:"route",parent:{type:"FR",parent:n,child:null,visible:1,index:c.inParentIndex},child:{type:"RF",parent:null,child:{type:"fragment",parent:null,child:[]},visible:0}};v.parent.child=v,v.child.parent=v,v.child.child.parent=v.child,n.child[c.inParentIndex]=v.parent,t={type:"route",block:v,ops:{},initialized:0};break;case"element":var h={type:"element",parent:{type:"FE",parent:n,child:null,visible:0,index:c.inParentIndex},child:{type:"EF",parent:null,child:{type:"fragment",parent:null,child:[]}},value:c.stencil.cloneNode()};h.parent.child=h,h.child.parent=h,h.child.child.parent=h.child,n.child[c.inParentIndex]=h.parent,t={type:"element",block:h,ops:{visible:y({value:0,priority:"tree",runOp:function(e){e?(L(h),t.needToCallNode&&(t.needToCallNode=0,(0,r.launch)({target:se,params:{element:h.value,fns:c.node},page:k.spawn}))):(h.value.remove(),h.parent.visible=0)},group:f})},needToCallNode:c.node.length>0},d=w(s);break;case"list":var m={type:"list",parent:{type:"FL",parent:n,child:null,visible:1,index:c.inParentIndex},child:[],lastChild:null};m.parent.child=m,n.child[c.inParentIndex]=m.parent,t={type:"list",draft:c,block:m};break;case"tree":var g={type:"tree",parent:{type:"FTree",parent:n,child:null,visible:1,index:c.inParentIndex},child:{type:"fragment",parent:null,child:[]}};g.parent.child=g,g.child.parent=g,n.child[c.inParentIndex]=g.parent,t={type:"tree",block:g};break;case"using":case"listItem":break;case"rec":var b={type:"rec",parent:{type:"FRec",parent:n,child:null,visible:1,index:c.inParentIndex},child:{type:"RecF",parent:null,child:{type:"fragment",parent:null,child:[]}}};b.parent.child=b,b.child.parent=b,b.child.child.parent=b.child,n.child[c.inParentIndex]=b.parent,t={type:"rec",block:b};break;case"recItem":var x={type:"recItem",parent:{type:"FRecItem",parent:n,child:null,visible:1,index:c.inParentIndex},child:{type:"RecItemF",parent:null,child:{type:"fragment",parent:null,child:[]}}};x.parent.child=x,x.child.parent=x,x.child.child.parent=x.child,n.child[c.inParentIndex]=x.parent,t={type:"rec item",block:x};break;default:console.warn("unexpected draft type ".concat(c.type))}var k=O(o,{values:u,parentLeaf:a,mountNode:i,svgRoot:l||a.svgRoot,leafData:t,opGroup:p,domSubtree:d,hydration:a.hydration})}function L(e){var t=V(e);t?t.after(e.value):D(e).prepend(e.value),e.parent.visible=1}function U(e,t){if(Array.isArray(t))return t.map(function(t){return e.map(function(e){return e[t]})});if("object"==i(t)&&null!==t){var n={},a=function(a){var r=t[a];n[a]=e.map("function"==typeof r?function(e){return r(e)}:function(e){return e[r]})};for(var r in t)a(r);return n}return e.map(function(e){return e[t]})}function z(e,t){function n(e){return e.data.block.value}function a(e,t,n){var a=e.data.block.child.child,r={type:"text",parent:{type:"FT",parent:a,child:null,visible:0,index:n},value:null};if(r.parent.child=r,a.child[n]=r.parent,e.hydration){var i=N(r);if(i)switch(i.type){case"text":r.value=u.document.createTextNode(t),i.value.after(r.value);break;case"element":r.value=i.value.nextSibling,A(r.value,t)}else{var o=D(r);r.value=o.firstChild,A(r.value,t)}r.parent.visible=1}else r.value=u.document.createTextNode(t),L(r);return r}var i,o=0,l=0;"function"==typeof t?(o=1,i=t):t&&(l=1,t.fn&&(o=1,i=t.fn),t.ɔ&&("function"==typeof t.ɔ?(o=1,i=t.ɔ):"function"==typeof t.ɔ.fn&&(o=1,i=t.ɔ.fn)));var u=ce.env,c=ce.namespace,s=c,p="html";s=p="svg"===c?"svg":"html","svg"===e&&(p="svg",s="svg");var f="svg"===p?u.document.createElementNS("http://www.w3.org/2000/svg",e):u.document.createElement(e);"foreignObject"===c?(f.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),s="html"):"svg"===e?(f.setAttribute("xmlns","http://www.w3.org/2000/svg"),s="svg"):"foreignObject"===e&&(s="foreignObject");var d=f,v={type:"element",tag:e,attr:[],data:[],text:[],styleProp:[],styleVar:[],handler:[],stencil:d,seq:[],childTemplates:[],childCount:0,inParentIndex:-1,opsAmount:1,node:[]},g=P({name:"element",draft:v,isSvgRoot:"svg"===e,namespace:s,fn:function(e,u){var{mount:c,unmount:s}=u;function p(e){return ne({mount:f,state:e,onMount:function(e,t){return{leaf:t,value:e}},onState:function(e,t){return{leaf:e,value:t}}})}var f=(0,r.createEvent)(),b=c.map(function(e){var{leaf:t}=e;return t});o&&i(),l&&W(t);for(var w={attr:{},data:{},text:v.text,styleProp:{},styleVar:{},visible:v.visible||null,handler:v.handler},x=0;x<v.attr.length;x++){var k=v.attr[x];for(var S in k)"xlink:href"===S?w.attr.href=k[S]:w.attr[S]=k[S]}for(var I=0;I<v.data.length;I++){var P=v.data[I];for(var q in P)w.data[q]=P[q]}for(var O=0;O<v.styleProp.length;O++){var E=v.styleProp[O];for(var M in E)M.startsWith("--")?w.styleVar[M.slice(2)]=E[M]:w.styleProp[M]=E[M]}for(var N=0;N<v.styleVar.length;N++){var B=v.styleVar[N];for(var L in B)w.styleVar[L]=B[L]}for(var U in w.visible&&v.seq.push({type:"visible",value:w.visible}),w.attr){var z=w.attr[U];r.is.unit(z)?v.seq.push({type:"attr",field:U,value:z}):T(d,U,z)}for(var _ in w.data){var Q=w.data[_];r.is.unit(Q)?v.seq.push({type:"data",field:_,value:Q}):R(d,_,Q)}for(var G in w.styleProp){var $=w.styleProp[G];r.is.unit($)?v.seq.push({type:"style",field:G,value:$}):C(d,G,$)}for(var H in w.styleVar){var J=w.styleVar[H];r.is.unit(J)?v.seq.push({type:"styleVar",field:H,value:J}):F(d,H,J)}for(var K=0;K<w.text.length;K++){var X=w.text[K];if(null!==X.value)if(r.is.unit(X.value)){v.seq.push({type:"dynamicText",value:X.value,childIndex:X.index});var Y=X.value.stateRef,Z=le;Z.plain.includes(Y)||Z.closure.includes(Y)||Z.closure.push(Y)}else v.seq.push({type:"staticText",value:String(X.value),childIndex:X.index})}for(var ee=0;ee<w.handler.length;ee++){var ae=w.handler[ee];for(var re in ae.map)v.seq.push({type:"handler",for:re,handler:ae.map[re],options:ae.options,domConfig:ae.domConfig})}if(w.visible){var{onMount:ie,onState:oe}=ne({mount:b,state:w.visible,onMount:function(e,t){return{leaf:t,value:e,hydration:t.hydration}},onState:function(e,t){return{leaf:e,value:t,hydration:0}},greedy:1});ie.watch(function(e){var{leaf:t,value:n,hydration:a}=e,i=t.data,o=i.block;if(a&&(h(n,i.ops.visible),n)){var l,u=V(o);if("#text"===(l=u?u.nextSibling:D(o).firstChild).nodeName){var c=l;l=l.nextSibling,c.remove()}o.value=l,o.parent.visible=1}j(v,{parentBlockFragment:o.child.child,leaf:t,node:o.value,svgRoot:g.isSvgRoot?o.value:null}),n&&i.needToCallNode&&(i.needToCallNode=0,(0,r.launch)({target:se,params:{element:i.block.value,fns:v.node},page:t.spawn,defer:1})),(0,r.launch)({target:f,params:t,defer:1,page:t.spawn})}),(0,r.merge)([oe,ie]).watch(function(e){var{leaf:t,value:n,hydration:a}=e;a||m(n,t.data.ops.visible)})}for(var ue=function(e){var t=v.seq[e];switch(t.type){case"visible":break;case"attr":var{field:i}=t,o="value"===i||"checked"===i||"min"===i||"max"===i,{onMount:l,onState:u}=p(t.value);if(o)(0,r.merge)([u,l]).watch(function(e){var{leaf:t,value:a}=e;T(n(t),i,a)});else{var c=v.opsAmount++;l.watch(function(e){var{value:t,leaf:a}=e,r=n(a),o=y({value:t,priority:"props",runOp:function(e){T(r,i,e)},group:a.ops.group});a.ops.group.ops[c]=o,T(r,i,t)}),u.watch(function(e){var{value:t,leaf:n}=e;m(t,n.ops.group.ops[c])})}break;case"data":var{field:s}=t,{onMount:d,onState:h}=p(t.value),g=v.opsAmount++;d.watch(function(e){var{value:t,leaf:a}=e,r=n(a),i=y({value:t,priority:"props",runOp:function(e){R(r,s,e)},group:a.ops.group});a.ops.group.ops[g]=i,R(r,s,t)}),h.watch(function(e){var{value:t,leaf:n}=e;m(t,n.ops.group.ops[g])});break;case"style":var b=v.opsAmount++,{field:w}=t,{onMount:x,onState:k}=p(t.value);x.watch(function(e){var{value:t,leaf:a}=e,r=n(a),i=y({value:t,priority:"props",runOp:function(e){C(r,w,e)},group:a.ops.group});a.ops.group.ops[b]=i,C(r,w,t)}),k.watch(function(e){var{value:t,leaf:n}=e;m(t,n.ops.group.ops[b])});break;case"styleVar":var{field:S}=t,{onMount:I,onState:P}=p(t.value),q=v.opsAmount++;I.watch(function(e){var{value:t,leaf:a}=e,r=n(a),i=y({value:t,priority:"props",runOp:function(e){F(r,S,e)},group:a.ops.group});a.ops.group.ops[q]=i,F(r,S,t)}),P.watch(function(e){var{value:t,leaf:n}=e;m(t,n.ops.group.ops[q])});break;case"staticText":f.map(function(e){return e}).watch(function(e){a(e,t.value,t.childIndex)});break;case"dynamicText":var O=v.opsAmount++;(0,r.sample)({source:t.value,clock:f,fn:function(e,t){return{value:String(e),leaf:t}},greedy:1}).watch(function(e){var{value:n,leaf:r}=e,i=y({value:n,priority:"props",runOp:function(e){A(o.value,e)},group:r.ops.group});r.ops.group.ops[O]=i;var o=a(r,n,t.childIndex)}),(0,r.sample)({source:f,clock:t.value,fn:function(e,t){return{leaf:e,text:t}}}).watch(function(e){var{leaf:t,text:n}=e;m(n,t.ops.group.ops[O])});break;case"handler":var D=t.handler.graphite.meta.nativeTemplate||null;f.watch(function(e){var a=null;if(D)for(var i=0,o=e.spawn;!i&&o;)o.template===D?(i=1,a=o):o=o.parent;n(e).addEventListener(t.for,function(e){t.options.prevent&&e.preventDefault(),t.options.stop&&e.stopPropagation(),(0,r.launch)({target:t.handler,params:e,page:a})},t.domConfig)})}},ce=0;ce<v.seq.length;ce++)ue(ce);(0,r.sample)(b,s).watch(function(e){var{spawn:t}=e;te(t,t.parent.childSpawns[t.template.id]),function e(t){for(var n in t.active=0,te(t,t.template.pages),t.childSpawns)t.childSpawns[n].forEach(e)}(t),m(0,e.data.ops.visible)}),c.watch(function(e){var{leaf:t}=e,n=t.data;if(!v.visible){var a=n.ops.visible,i=n.block;if(t.hydration){h(1,a);var o,l=V(i);if("#text"===(o=l?l.nextSibling:D(i).firstChild).nodeName){var u=o;o=o.nextSibling,u.remove()}i.value=o,i.parent.visible=1}j(v,{parentBlockFragment:i.child.child,leaf:t,node:i.value,svgRoot:g.isSvgRoot?i.value:null}),(0,r.launch)({target:f,params:t,defer:1,page:t.spawn}),t.hydration?n.needToCallNode&&(n.needToCallNode=0,(0,r.launch)({target:se,params:{element:n.block.value,fns:v.node},page:t.spawn,defer:1})):m(1,a)}})},env:u});ee(g)}function _(){if("undefined"!=typeof document)return{document:document};throw Error("your environment has no document")}function Q(e,t){var n,a,r,i,o;"function"==typeof t?(n=t,r=_(),i=0):(n=t.fn,r=t.env?t.env:_(),i=t.hydrate,a=t.onComplete,o=t.onRoot);var l=e.namespaceURI,u=e.tagName.toLowerCase(),c={type:"using",childTemplates:[],childCount:0,inParentIndex:-1},s=P({name:"using",draft:c,isSvgRoot:"svg"===u,namespace:"http://www.w3.org/2000/svg"===l?"svg":"foreignobject"===u?"foreignObject":"html",fn:function(e,t){var{mount:a}=t;n(),a.watch(function(e){var{node:t,leaf:n}=e;j(c,{parentBlockFragment:n.data.block.child.child,leaf:n,node:t})})},env:r}),p={type:"using",child:{type:"UF",parent:null,child:{type:"fragment",parent:null,child:[]}},value:e};p.child.parent=p,p.child.child.parent=p.child;var f=b({onComplete:a}),d=O(s,{parentLeaf:ue||null,mountNode:e,svgRoot:s.isSvgRoot?e:ue?ue.svgRoot:null,leafData:{type:"using",draft:c,element:e,block:p},opGroup:w(f),domSubtree:w(f),hydration:i});o&&o({template:s,leaf:d})}function G(e){var t=ce.draft;switch(t.type){case"list":case"listItem":case"using":case"route":case"tree":case"treeItem":case"rec":case"recItem":return}t.node.push(e)}function W(e){var t=ce.draft;switch(t.type){case"list":return void(e.visible&&(t.itemVisible=e.visible));case"listItem":case"using":case"route":case"tree":case"treeItem":case"rec":case"recItem":return}if(e.attr&&t.attr.push(e.attr),e.data&&t.data.push(e.data),"text"in e){var n,a=e.text,r=t.childCount;Array.isArray(a)?((n=t.text).push.apply(n,o(a.map(function(e,t){return{index:t+r,value:e}}))),t.childCount+=a.length):(t.text.push({index:r,value:a}),t.childCount+=1)}if(e.style&&t.styleProp.push(e.style),e.styleVar&&t.styleVar.push(e.styleVar),e.visible&&(t.visible=e.visible),e.handler){var l=e.handler;"object"==i(l.on)?$(l.config||{},l.on):$(l)}e.ɔ&&W(e.ɔ)}function $(e,t){var n=ce.draft;if("element"!==n.type)throw Error('"handler" extension can be used only with element nodes, got "'.concat(n.type,'"'));void 0===t&&(t=e,e={});var{passive:a=1,capture:r=0,prevent:i=0,stop:o=0}=e;n.handler.push({options:{prevent:i,stop:o},domConfig:{passive:i?0:a,capture:r},map:t})}function H(e){var{source:t,cases:n,key:a}=e,r="function"==typeof a?a:function(e){return String(e[a])},i=0,o=function(e){"__"!==e?J({source:t,visible:function(t){return r(t)===e},fn:n[e]}):i=1};for(var l in n)o(l);if(i){var u=Object.keys(n);J({source:t,visible:function(e){return!u.includes(r(e))},fn:n.__})}}function J(e){var{source:t,visible:n,fn:a}=e,i=P({name:"route",isSvgRoot:0,namespace:ce.namespace,env:ce.env,draft:{type:"route",childTemplates:[],childCount:0,inParentIndex:-1},fn:function(e,i){var{mount:o,unmount:l}=i,u=t.map(function(e){return{value:e,visible:n(e)}}),c={type:"route",childTemplates:[],childCount:0,inParentIndex:-1},s=P({name:"route item",isSvgRoot:0,namespace:ce.namespace,env:ce.env,draft:c,state:{store:null},fn:function(e,t){var{store:n}=e,{mount:i,unmount:o}=t,l=(0,r.createEvent)();n.on(l,function(e,t){return t}),a({store:n});var s=(0,r.sample)({source:i,clock:u,fn:function(e,t){var{leaf:n,node:a}=e,{visible:r,value:i}=t;return{leaf:n,visible:r,node:a,value:i}},greedy:1});i.watch(function(e){var{leaf:t,node:n}=e,a=t.data;a.block.child.visible=1,j(c,{parentBlockFragment:a.block.child.child,leaf:t,node:n})}),s.watch(function(e){var{leaf:t,visible:n,value:a}=e;t.data.block.child.visible=n,n&&(0,r.launch)({target:l,params:a,defer:1,page:t.spawn}),K(t,function(e){var t=e.data;switch(t.type){case"element":m(n,t.ops.visible);break;default:console.log("unsupported type",t.type)}})}),(0,r.sample)(i,o).watch(function(e){var{leaf:t}=e;K(t,function(e){e.api.unmount()});var{spawn:n}=t;n.active=0,te(n,n.parent.childSpawns[n.template.id]),te(n,n.template.pages)})}});ee(s);var{onMount:p,onState:f}=ne({mount:o,state:u,onMount:function(e,t){var{visible:n,value:a}=e,{leaf:r,node:i}=t;return{leaf:r,visible:n,node:i,value:a}},onState:function(e,t){var{leaf:n,node:a}=e,{visible:r,value:i}=t;return{leaf:n,visible:r,node:a,value:i}},greedy:1});(0,r.merge)([p,f]).watch(function(e){var{leaf:t,visible:n,value:a,node:r}=e,i=t.data;i.block.child.visible=n,n&&!i.initialized&&(B({parentBlockFragment:i.block.child.child,leaf:t,node:r,actor:s,values:{store:a}}),i.initialized=1)}),(0,r.sample)(o,l).watch(function(e){var{leaf:t}=e;K(t,function(e){e.api.unmount()});var{spawn:n}=t;n.active=0,te(n,n.parent.childSpawns[n.template.id]),te(n,n.template.pages)})}});ee(i)}function K(e,t){var{spawn:n}=e;for(var a in n.childSpawns)for(var r=n.childSpawns[a],i=0;i<r.length;i++)t(r[i].leaf)}function X(e){var t={type:"rec",childTemplates:[],childCount:0,inParentIndex:0},n=P({name:"rec",state:{store:null},isSvgRoot:0,namespace:ce.namespace,env:ce.env,draft:t,defer:1,fn:function(n,a){var{store:i}=n,{mount:o,unmount:l}=a;e({state:i});var u=(0,r.createEvent)();return i.on(u,function(e,t){return t}),o.watch(function(e){var{node:n,leaf:a}=e;j(t,{parentBlockFragment:a.data.block.child.child,leaf:a,node:n})}),(0,r.sample)(o,l).watch(function(e){var{leaf:t}=e;t.spawn.active=0,K(t,function(e){e.api.unmount()})}),{itemUpdater:u}}});return function(e){var{state:t}=e;n.deferredInit&&n.deferredInit();var{env:a,namespace:i}=ce;ee(P({name:"rec item",isSvgRoot:0,namespace:i,env:a,draft:{type:"recItem",childTemplates:[],childCount:0,inParentIndex:-1},fn:function(e,a){var{mount:i,unmount:o}=a,{onMount:l,onState:u}=ne({state:t,mount:i,onMount:function(e,t){var{leaf:n,node:a}=t;return{state:e,leaf:n,node:a}},onState:function(e,t){var{leaf:n,node:a}=e;return{state:t,leaf:n,node:a}},greedy:1});(0,r.sample)(i,o).watch(function(e){var{leaf:t}=e;t.spawn.active=0,K(t,function(e){e.api.unmount()})}),u.watch(function(e){var{state:t,leaf:n}=e;K(n,function(e){e.api.itemUpdater(t)})}),l.watch(function(e){var{node:t,leaf:a,state:r}=e;B({parentBlockFragment:a.data.block.child.child,leaf:a,node:t,actor:n,values:{store:r}})})}}))}}function Y(e){var{source:t,child:n,fn:a}=e,r=X(function(e){var{state:t}=e;Z({source:t,fn:function(e){var{store:t}=e,i=t.map(function(e){return e[n]||[]});a({store:t,child:function(){r({state:i})}})}})});r({state:t})}function Z(e,a){"function"==typeof a&&(r.is.unit(e)?e={source:e,fn:a}:e.fn=a);var{fn:i,key:o,source:l,fields:u=[]}=e,c=void 0!==o?"function"==typeof o?o:function(e){return e[o]}:function(e,t){return t},s={type:"list",key:r.is.store(e)?{type:"index"}:{type:"key",key:e.key},childTemplates:[],childCount:0,inParentIndex:-1},p=ce.env,f=ce.namespace;ee(P({name:"list",draft:s,isSvgRoot:0,namespace:f,fn:function(e,a){var{mount:o,unmount:d}=a,v=P({name:"list item",state:{id:-1,store:null},draft:s,isSvgRoot:0,namespace:f,fn:function(e,t){var{id:n,store:a}=e,{mount:o,unmount:l}=t;i({store:a,key:n,fields:U(a,u)});var c=(0,r.createEvent)();a.on(c,function(e,t){return t});var p=(0,r.createStore)({leaf:null});if((0,r.sample)(p,l).watch(function(e){var{leaf:t}=e,n=t.data.block;te(n,n.parent.child);var a=n.left,r=n.right;a&&(a.right=r,r||n.parent.lastChild!==n||(n.parent.lastChild=a)),r&&(r.left=a),a||r||n.parent.lastChild!==n||(n.parent.lastChild=null),n.left=null,n.right=null,K(t,function(e){e.api.unmount()});var{spawn:i}=t;i.active=0,te(i,i.parent.childSpawns[i.template.id]),te(i,i.template.pages)}),s.itemVisible){var{onMount:f,onState:d}=ne({mount:o,state:s.itemVisible,onMount:function(e,t){var{node:n,leaf:a}=t;return{visible:e,node:n,leaf:a}},onState:function(e,t){var{node:n,leaf:a}=e;return{visible:t,node:n,leaf:a}}});f.watch(function(e){var{visible:t,node:n,leaf:a}=e;p.setState({leaf:a});var r=a.data.block;r.visible=t,r.childInitialized=t,t&&j(s,{parentBlockFragment:r.child,leaf:a,node:n})}),d.watch(function(e){var{visible:t,node:n,leaf:a}=e,r=a.data.block;r.visible=t,r.childInitialized?K(a,function(e){var n=e.data;switch(n.type){case"element":m(t,n.ops.visible);break;default:console.log("unsupported type",n.type)}}):t&&(r.childInitialized=1,j(s,{parentBlockFragment:r.child,leaf:a,node:n}))})}else o.watch(function(e){var{node:t,leaf:n}=e;p.setState({leaf:n});var a=n.data.block;a.visible=1,a.childInitialized=1,j(s,{parentBlockFragment:a.child,leaf:n,node:t})});return{itemUpdater:c}},env:p}),h=(0,r.createStore)([]),g=l.map(function(e){return e}),y=(0,r.sample)({source:l,clock:o,fn:function(e,t){var{node:n,leaf:a}=t;return{updates:e,node:n,leaf:a,hydration:a.hydration}},greedy:1}),b=(0,r.sample)({source:y,clock:g,fn:function(e,t){var{node:n,leaf:a}=e;return{updates:t,node:n,leaf:a,hydration:0}},greedy:1}),I=(0,r.merge)([y,b]);(0,r.sample)({source:h,clock:I,greedy:1,fn:function(e,a){var{node:r,updates:i,leaf:o,hydration:u}=a,s=o.data.block;t("list update ["+l.shortName+"]");for(var p=Array(i.length).fill(0),f=i.map(c),d=[],h=0;h<e.length;h++){var m=e[h],g=f.indexOf(m.key);-1!==g?(d.push(m),p[g]=1,S(i[g],m.asyncValue)):(m.active=0,m.instance&&m.instance.api.unmount(),k(m.asyncValue))}for(var y=function(e){if(p[e])return"continue";var t=i[e],n=f[e],a=w(o.ops.group.queue),l={type:"LF",parent:s,child:{type:"fragment",parent:null,child:[]},childInitialized:0,visible:0,left:null,right:null},c={type:"listItem",key:n,index:n,active:1,leafData:{type:"list item",block:l},asyncValue:x({value:t,group:a,onTerminate:function(e){},onChange:function(e){c.instance&&c.instance.api.itemUpdater(e)},onInit:function(e){c.active&&(u||(c.instance=O(v,{values:{id:n,store:e},parentLeaf:o,mountNode:r,svgRoot:o.svgRoot,leafData:c.leafData,opGroup:a,domSubtree:o.ops.domSubtree,hydration:u})))}})},h=d.length;d.push(c);var m=h>0?d[h-1].leafData:null;if(l.child.parent=l,s.child.push(l),m){var g=m.block;l.left=g;var y=g.right;y?(y.left=l,l.right=y):s.lastChild=l,g.right=l}else s.lastChild=l;u&&(c.instance=O(v,{values:{id:n,store:t},parentLeaf:o,mountNode:r,svgRoot:o.svgRoot,leafData:c.leafData,opGroup:a,domSubtree:o.ops.domSubtree,hydration:u}))},b=0;b<i.length;b++)y(b);return n("list update ["+l.shortName+"]"),0===d.length&&(s.lastChild=null),d},target:h}),(0,r.sample)({source:o,clock:(0,r.sample)(h,d),fn:function(e,t){var{leaf:n}=e;return{leaf:n,records:t}}}).watch(function(e){for(var{leaf:t,records:n}=e,a=0;a<n.length;a++){var r=n[a];r.instance&&r.instance.api.unmount(),r.active=0}var{spawn:i}=t;i.active=0,te(i,i.parent.childSpawns[i.template.id]),te(i,i.template.pages)})},env:p}))}function ee(e){if(ce){var{draft:t}=e;if("listItem"!==t.type&&"rec"!==t.type)switch(ce.draft.type){case"element":case"using":case"route":case"list":case"tree":case"treeItem":case"rec":case"recItem":t.inParentIndex=ce.draft.childCount,ce.draft.childCount+=1,ce.draft.childTemplates.push(e);break;default:console.warn("unexpected currentActor type ".concat(ce.draft.type))}}}function te(e,t){if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}}function ne(e){var{mount:t,state:n,onMount:a,onState:i,greedy:o=0}=e;return{onMount:(0,r.sample)({source:n,clock:t,fn:a,greedy:o}),onState:(0,r.sample)({source:t,clock:n,fn:i,greedy:o})}}function ae(e){for(var t=[e[0]],n=0;n<(arguments.length<=1?0:arguments.length-1);n++)t.push(n+1<1||arguments.length<=n+1?void 0:arguments[n+1],e[n+1]);W({text:t})}"undefined"!=typeof performance&&performance.mark?(t=function(e){performance.mark("☄️ "+e+" start")},n=function(e){try{performance.measure("☄️ "+e,"☄️ "+e+" start")}catch(e){}performance.clearMarks("☄️ "+e+" start"),performance.clearMeasures("☄️ "+e)}):(t=function(){},n=function(){}),a="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:void 0!==e&&e.hrtime?function(){var t=e.hrtime();return(1e9*t[0]+t[1])/1e6}:function(){return Date.now()};var re="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:function(e){return setTimeout(e,0)},ie=0,oe=0,le=null,ue=null,ce=null,se=(0,r.createEvent)();se.watch(function(e){var{fns:t,element:n}=e;t.forEach(function(e){e(n)})});
},{"effector":"Bgek","process":"g5IB"}],"rE4y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.alloc=Y,exports.append=R,exports.caret=K,exports.char=z,exports.charat=O,exports.combine=C,exports.comment=se,exports.commenter=Q,exports.compile=ee,exports.copy=L,exports.dealloc=B,exports.declaration=ae,exports.delimit=G,exports.delimiter=J,exports.hash=d,exports.identifier=X,exports.indexof=A,exports.match=T,exports.middleware=ue,exports.namespace=xe,exports.next=D,exports.node=_,exports.parse=re,exports.peek=j,exports.prefix=ce,exports.prefixer=ie,exports.replace=k,exports.ruleset=te,exports.rulesheet=pe,exports.serialize=ne,exports.sizeof=S,exports.slice=V,exports.stringify=oe,exports.strlen=M,exports.substr=g,exports.token=W,exports.tokenize=H,exports.tokenizer=q,exports.trim=w,exports.whitespace=Z,exports.position=exports.line=exports.length=exports.from=exports.column=exports.characters=exports.character=exports.abs=exports.WEBKIT=exports.VIEWPORT=exports.SUPPORTS=exports.RULESET=exports.PAGE=exports.NAMESPACE=exports.MS=exports.MOZ=exports.MEDIA=exports.KEYFRAMES=exports.IMPORT=exports.FONT_FEATURE_VALUES=exports.FONT_FACE=exports.DOCUMENT=exports.DECLARATION=exports.COUNTER_STYLE=exports.COMMENT=exports.CHARSET=void 0;var e="-ms-";exports.MS=e;var r="-moz-";exports.MOZ=r;var t="-webkit-";exports.WEBKIT=t;var s="comm";exports.COMMENT=s;var a="rule";exports.RULESET=a;var c="decl";exports.DECLARATION=c;var n="@page";exports.PAGE=n;var o="@media";exports.MEDIA=o;var u="@import";exports.IMPORT=u;var p="@charset";exports.CHARSET=p;var i="@viewport";exports.VIEWPORT=i;var x="@supports";exports.SUPPORTS=x;var f="@document";exports.DOCUMENT=f;var l="@namespace";exports.NAMESPACE=l;var h="@keyframes";exports.KEYFRAMES=h;var v="@font-face";exports.FONT_FACE=v;var E="@counter-style";exports.COUNTER_STYLE=E;var b="@font-feature-values";exports.FONT_FEATURE_VALUES=b;var m=Math.abs;exports.abs=m;var $=String.fromCharCode;function d(e,r){return(((r<<2^O(e,0))<<2^O(e,1))<<2^O(e,2))<<2^O(e,3)}function w(e){return e.trim()}function T(e,r){return(e=r.exec(e))?e[0]:e}function k(e,r,t){return e.replace(r,t)}function A(e,r){return e.indexOf(r)}function O(e,r){return 0|e.charCodeAt(r)}function g(e,r,t){return e.slice(r,t)}function M(e){return e.length}function S(e){return e.length}function R(e,r){return r.push(e),e}function C(e,r){return e.map(r).join("")}exports.from=$;var N=1;exports.line=N;var P=1;exports.column=P;var U=0;exports.length=U;var y=0;exports.position=y;var F=0;exports.character=F;var I="";function _(e,r,t,s,a,c,n){return{value:e,root:r,parent:t,type:s,props:a,children:c,line:N,column:P,length:n,return:""}}function L(e,r,t){return _(e,r.root,r.parent,t,r.props,r.children,0)}function z(){return F}function D(){var e,r,t;return exports.character=F=y<U?O(I,(e=+y,exports.position=y=e+1,e)):0,r=+P,exports.column=P=r+1,10===F&&(exports.column=P=1,t=+N,exports.line=N=t+1),F}function j(){return O(I,y)}function K(){return y}function V(e,r){return g(I,e,r)}function W(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Y(e){return exports.line=N=exports.column=P=1,exports.length=U=M(exports.characters=I=e),exports.position=y=0,[]}function B(e){return exports.characters=I="",e}function G(e){return w(V(y-1,J(91===e?e+2:40===e?e+1:e)))}function H(e){return B(q(Y(e)))}function Z(e){for(;(exports.character=F=j())&&F<33;)D();return W(e)>2||W(F)>3?"":" "}function q(e){for(;D();)switch(W(F)){case 0:R(X(y-1),e);break;case 2:R(G(F),e);break;default:R($(F),e)}return e}function J(e){for(;D();)switch(F){case e:return y;case 34:case 39:return J(34===e||39===e?e:F);case 40:41===e&&J(e);break;case 92:D()}return y}function Q(e,r){for(;D()&&e+F!==57&&(e+F!==84||47!==j()););return"/*"+V(r,y-1)+"*"+$(47===e?e:D())}function X(e){for(;!W(j());)D();return V(e,y)}function ee(e){return B(re("",null,null,null,[""],e=Y(e),0,[0],e))}function re(e,r,t,s,a,c,n,o,u){for(var p=0,i=0,x=n,f=0,l=0,h=0,v=1,E=1,b=1,m=0,d="",w=a,T=c,A=s,O=d;E;)switch(h=m,m=D()){case 34:case 39:case 91:case 40:O+=G(m);break;case 9:case 10:case 13:case 32:O+=Z(h);break;case 47:switch(j()){case 42:case 47:R(se(Q(D(),K()),r,t),u);break;default:O+="/"}break;case 123*v:o[p++]=M(O)*b;case 125*v:case 59:case 0:switch(m){case 0:case 125:E=0;case 59+i:l>0&&R(l>32?ae(O+";",s,t,x-1):ae(k(O," ","")+";",s,t,x-2),u);break;case 59:O+=";";default:if(R(A=te(O,r,t,p,i,a,o,d,w=[],T=[],x),c),123===m)if(0===i)re(O,r,A,A,w,c,x,o,T);else switch(f){case 100:case 109:case 115:re(e,A,A,s&&R(te(e,A,A,0,0,a,o,d,a,w=[],x),T),a,T,x,o,s?w:T);break;default:re(O,A,A,A,[""],T,x,o,T)}}p=i=l=0,v=b=1,d=O="",x=n;break;case 58:x=1+M(O),l=h;default:switch(O+=$(m),m*v){case 38:b=i>0?1:(O+="\f",-1);break;case 44:o[p++]=(M(O)-1)*b,b=1;break;case 64:45===j()&&(O+=G(D())),f=j(),i=M(d=O+=X(K())),m++;break;case 45:45===h&&2==M(O)&&(v=0)}}return c}function te(e,r,t,s,c,n,o,u,p,i,x){for(var f=c-1,l=0===c?n:[""],h=S(l),v=0,E=0,b=0;v<s;++v)for(var $=0,d=g(e,f+1,f=m(E=o[v])),T=e;$<h;++$)(T=w(E>0?l[$]+" "+d:k(d,/&\f/g,l[$])))&&(p[b++]=T);return _(e,r,t,0===c?a:u,p,i,x)}function se(e,r,t){return _(e,r,t,s,$(z()),g(e,2,-2),0)}function ae(e,r,t,s){return _(e,r,t,c,g(e,0,s),g(e,s+1,-1),s)}function ce(s,a){switch(d(s,a)){case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return t+s+s;case 5349:case 4246:case 4810:case 6968:case 2756:return t+s+r+s+e+s+s;case 6828:case 4268:return t+s+e+s+s;case 6165:return t+s+e+"flex-"+s+s;case 5187:return t+s+k(s,/(\w+).+(:[^]+)/,t+"box-$1$2"+e+"flex-$1$2")+s;case 5443:return t+s+e+"flex-item-"+k(s,/flex-|-self/,"")+s;case 4675:return t+s+e+"flex-line-pack"+k(s,/align-content|flex-|-self/,"")+s;case 5548:return t+s+e+k(s,"shrink","negative")+s;case 5292:return t+s+e+k(s,"basis","preferred-size")+s;case 6060:return t+"box-"+k(s,"-grow","")+t+s+e+k(s,"grow","positive")+s;case 4554:return t+k(s,/([^-])(transform)/g,"$1"+t+"$2")+s;case 6187:return k(k(k(s,/(zoom-|grab)/,t+"$1"),/(image-set)/,t+"$1"),s,"")+s;case 5495:case 3959:return k(s,/(image-set\([^]*)/,t+"$1$`$1");case 4968:return k(k(s,/(.+:)(flex-)?(.*)/,t+"box-pack:$3"+e+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+t+s+s;case 4095:case 3583:case 4068:case 2532:return k(s,/(.+)-inline(.+)/,t+"$1$2")+s;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(M(s)-1-a>6)switch(O(s,a+1)){case 109:return k(s,/(.+:)(.+)-([^]+)/,"$1"+t+"$2-$3$1"+r+"$2-$3")+s;case 102:return k(s,/(.+:)(.+)-([^]+)/,"$1"+t+"$2-$3$1"+r+"$3")+s;case 115:return ce(k(s,"stretch","fill-available"),a)+s}break;case 4949:if(115!==O(s,a+1))break;case 6444:switch(O(s,M(s)-3-(~A(s,"!important")&&10))){case 107:case 111:return k(s,s,t+s)+s;case 101:return k(s,/(.+:)([^;!]+)(;|!.+)?/,"$1"+t+(45===O(s,14)?"inline-":"")+"box$3$1"+t+"$2$3$1"+e+"$2box$3")+s}break;case 5936:switch(O(s,a+11)){case 114:return t+s+e+k(s,/[svh]\w+-[tblr]{2}/,"tb")+s;case 108:return t+s+e+k(s,/[svh]\w+-[tblr]{2}/,"tb-rl")+s;case 45:return t+s+e+k(s,/[svh]\w+-[tblr]{2}/,"lr")+s}return t+s+e+s+s}return s}function ne(e,r){for(var t="",s=S(e),a=0;a<s;a++)t+=r(e[a],a,e,r)||"";return t}function oe(e,r,t,n){switch(e.type){case u:case c:return e.return=e.return||e.value;case s:return"";case a:e.value=e.props.join(",")}return M(t=ne(e.children,n))?e.return=e.value+"{"+t+"}":""}function ue(e){var r=S(e);return function(t,s,a,c){for(var n="",o=0;o<r;o++)n+=e[o](t,s,a,c)||"";return n}}function pe(e){return function(r){r.root||(r=r.return)&&e(r)}}function ie(s,n,o,u){if(!s.return)switch(s.type){case c:s.return=ce(s.value,s.length);break;case h:return ne([L(k(s.value,"@","@"+t),s,"")],u);case a:if(s.length)return C(s.props,function(a){switch(T(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ne([L(k(a,/:(read-\w+)/,":"+r+"$1"),s,"")],u);case"::placeholder":return ne([L(k(a,/:(plac\w+)/,":"+t+"input-$1"),s,""),L(k(a,/:(plac\w+)/,":"+r+"$1"),s,""),L(k(a,/:(plac\w+)/,e+"input-$1"),s,"")],u)}return""})}}function xe(e){switch(e.type){case a:e.props=e.props.map(function(r){return C(H(r),function(r,t,s){switch(O(r,0)){case 12:return g(r,1,M(r));case 0:case 40:case 43:case 62:case 126:return r;case 58:"global"===s[t+1]&&(s[t+1]="",s[t+2]="\f"+g(s[t+2],t=1,-1));case 32:return 1===t?"":r;default:switch(t){case 0:return e=r,S(s)>1?"":r;case t=S(s)-1:case 2:return 2===t?r+e+e:r+e;default:return r}}})})}}exports.characters=I;
},{}],"Lmgq":[function(require,module,exports) {
module.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(e,t){e.exports=require("forest")},function(e,t){e.exports=require("stylis")},function(e,t){e.exports=require("effector")},function(e,t,r){"use strict";r.r(t),r.d(t,"StyledRoot",function(){return u}),r.d(t,"styled",function(){return p});var n=r(2),o=r(0),i=r(1);const a=Object(n.createEvent)(),s=Object(n.createStore)({map:new Map});function u(){const e=s.map(({map:e})=>[...e.values()].join(" "));Object(o.h)("style",{text:e})}s.on(a,(e,{id:t,styles:r})=>e.map.has(t)?e:(e.map.set(t,function(e,t){return Object(i.serialize)(Object(i.compile)(`.es-${e} { ${t} }`),i.stringify)}(t,r)),{map:e.map}));const c=(()=>{let e=9005e3;return()=>(++e).toString(36)})(),l=e=>(t,...r)=>{const n=c(),i=function(e,t){const r=[e[0]];return t.forEach((t,n)=>{if("function"==typeof t){if("string"!=typeof t.STYLED_ID)throw new TypeError("Passed not an effector styled component");r.push(".es-"+t.STYLED_ID)}else r.push(String(t));r.push(e[n+1])}),r.join("")}(t,r),s=t=>{a({id:n,styles:i}),Object(o.h)(e,()=>{Object(o.node)(e=>{e.classList.add("es-"+n)}),t&&("function"==typeof t?t():(Object(o.spec)(t),"function"==typeof t.fn&&t.fn()))})};return s.STYLED_ID=n,s};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","marquee","menu","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach(e=>{l[e]=l(e)});const p=l}]);
},{"forest":"DGGC","stylis":"rE4y","effector":"Bgek"}],"Qd94":[function(require,module,exports) {
"use strict";var e,t,o;Object.defineProperty(exports,"__esModule",{value:!0}),exports.Direction=exports.Status=exports.CellType=void 0,function(e){e[e.EMPTY=0]="EMPTY",e[e.SNAKE=1]="SNAKE",e[e.FOOD=2]="FOOD"}(e=exports.CellType||(exports.CellType={})),function(e){e[e.START=0]="START",e[e.WAIT=1]="WAIT",e[e.RUN=2]="RUN",e[e.END=3]="END"}(t=exports.Status||(exports.Status={})),function(e){e[e.NONE=0]="NONE",e[e.UP=1]="UP",e[e.DOWN=2]="DOWN",e[e.LEFT=3]="LEFT",e[e.RIGHT=4]="RIGHT"}(o=exports.Direction||(exports.Direction={}));
},{}],"gYtE":[function(require,module,exports) {
"use strict";var n=this&&this.__makeTemplateObject||function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n};Object.defineProperty(exports,"__esModule",{value:!0}),exports.EndScreen=exports.StartScreen=exports.GameScreen=exports.Info=exports.Summary=exports.Cell=exports.Board=exports.Root=void 0;var e,t,o,r,i,a,l,d,p=require("forest"),c=require("foliage"),s=require("./types");exports.Root=c.styled.div(e||(e=n(["\n  position: relative;\n  background-color: gray;\n  min-height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n\n  & [data-screen='modal'] {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n  }\n\n  & [data-font-size='big'] {\n    font-size: 30px;\n  }\n\n  & [data-font-size='small'] {\n    font-size: 22px;\n  }\n"],["\n  position: relative;\n  background-color: gray;\n  min-height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n\n  & [data-screen='modal'] {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n  }\n\n  & [data-font-size='big'] {\n    font-size: 30px;\n  }\n\n  & [data-font-size='small'] {\n    font-size: 22px;\n  }\n"]))),exports.Board=c.styled.div(t||(t=n(["\n  display: flex;\n  flex-wrap: wrap;\n  width: calc((20px + 4px) * 15);\n"],["\n  display: flex;\n  flex-wrap: wrap;\n  width: calc((20px + 4px) * 15);\n"]))),exports.Cell=c.styled.div(o||(o=n(["\n  width: 20px;\n  height: 20px;\n  box-sizing: border-box;\n  margin: 2px;\n  \n  &[data-type='","'] {\n    background-color: lightgray;\n  }\n\n  &[data-type='","'] {\n    background-color: black;\n  }\n\n  &[data-type='","'] {\n    background-color: yellow;\n  }\n"],["\n  width: 20px;\n  height: 20px;\n  box-sizing: border-box;\n  margin: 2px;\n  \n  &[data-type='","'] {\n    background-color: lightgray;\n  }\n\n  &[data-type='","'] {\n    background-color: black;\n  }\n\n  &[data-type='","'] {\n    background-color: yellow;\n  }\n"])),s.CellType.EMPTY,s.CellType.SNAKE,s.CellType.FOOD),exports.Summary=c.styled.div(r||(r=n(["\n  width: 150px;\n  height: calc((20px + 4px) * 15);\n  margin-left: 20px;\n"],["\n  width: 150px;\n  height: calc((20px + 4px) * 15);\n  margin-left: 20px;\n"]))),exports.Info=c.styled.div(i||(i=n(["\n  font-size: 18px;\n"],["\n  font-size: 18px;\n"]))),exports.GameScreen=c.styled.div(a||(a=n(["\n  display: flex;\n"],["\n  display: flex;\n"]))),exports.StartScreen=c.styled.div(l||(l=n(["\n  background-color: rgba(0, 0, 0, 0.9);\n"],["\n  background-color: rgba(0, 0, 0, 0.9);\n"]))),exports.EndScreen=c.styled.div(d||(d=n(["\n  background-color: rgba(100, 0, 0, 0.9);\n  flex-direction: column;\n"],["\n  background-color: rgba(100, 0, 0, 0.9);\n  flex-direction: column;\n"]))),p.using(document.head,c.StyledRoot);
},{"forest":"DGGC","foliage":"Lmgq","./types":"Qd94"}],"UldJ":[function(require,module,exports) {
"use strict";function e(r){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(r)}var r=this&&this.__spreadArrays||function(){for(var e=0,r=0,t=arguments.length;r<t;r++)e+=arguments[r].length;var o=Array(e),n=0;for(r=0;r<t;r++)for(var i=arguments[r],c=0,u=i.length;c<u;c++,n++)o[n]=i[c];return o};Object.defineProperty(exports,"__esModule",{value:!0}),exports.keycodeToDirection=exports.moveSnake=exports.createFood=exports.populateCells=exports.tick=void 0;var t=require("./types");function o(e){return new Promise(function(r){return setTimeout(r,1e3/(1+e))})}function n(e){for(var r=e[0],o=e[1],n=Array.from({length:225},function(){return t.CellType.EMPTY}),i=0,c=r;i<c.length;i++){var u=c[i];n[15*u[1]+u[0]]=t.CellType.SNAKE}return o&&(n[15*o[1]+o[0]]=t.CellType.FOOD),n}function i(r,t){if(t)return t;for(var o=function(){var e=Math.floor(15*Math.random()),t=Math.floor(15*Math.random());if(!r.some(function(r){return r[0]===e&&r[1]===t}))return{value:[e,t]}};;){var n=o();if("object"===e(n))return n.value}}function c(e){var o=e[0],n=e[1],i=e[2],c=r(o),u=o[o.length-1],a=u[0],f=u[1];switch(i){case t.Direction.UP:f=f-1<0?14:f-1;break;case t.Direction.DOWN:f=f+1>14?0:f+1;break;case t.Direction.LEFT:a=a-1<0?14:a-1;break;case t.Direction.RIGHT:a=a+1>14?0:a+1}c.push([a,f]);var s=n||[],l=s[0],p=s[1],y=n;if(l!==a||p!==f?c.shift():y=null,o.some(function(e){return e[0]===a&&e[1]===f}))throw new Error;return[c,y]}function u(e,r){return 37===r&&e!==t.Direction.RIGHT?t.Direction.LEFT:38===r&&e!==t.Direction.DOWN?t.Direction.UP:39===r&&e!==t.Direction.LEFT?t.Direction.RIGHT:40===r&&e!==t.Direction.UP?t.Direction.DOWN:e}exports.tick=o,exports.populateCells=n,exports.createFood=i,exports.moveSnake=c,exports.keycodeToDirection=u;
},{"./types":"Qd94"}],"eQwH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.$cells=exports.$score=exports.$status=exports.keydown=void 0;var e=require("effector"),t=require("./types"),r=require("./utils"),o=e.createEvent();exports.keydown=e.createEvent();var s=e.createEffect({handler:r.tick}),a=e.createEffect({handler:r.moveSnake});exports.$status=e.createStore(t.Status.START).on(exports.keydown,function(e){return e===t.Status.START||e===t.Status.END?t.Status.WAIT:t.Status.RUN}).on(a.fail,function(){return t.Status.END});var c=e.createStore(t.Direction.NONE).on(exports.keydown,r.keycodeToDirection).reset(a.fail),n=e.createStore([[7,7]]).on(a.doneData,function(e,t){return t[0]}).reset(a.fail),u=e.createStore([7,5]);exports.$score=e.createStore(0).on(a.doneData,function(e,t){t[0];return t[1]?e:e+1}).reset(exports.$status.updates.filter({fn:function(e){return e===t.Status.WAIT}})),exports.$cells=e.createStore([]),e.sample({source:[n,u],clock:e.merge([o,n.updates,u.updates]),target:exports.$cells,fn:r.populateCells}),e.sample({source:n,clock:a.doneData.map(function(e){e[0];return e[1]}),target:u,fn:r.createFood}),e.sample({source:[n,u,c],clock:s,target:a}),e.sample({source:exports.$score,clock:e.guard(e.merge([s.done,exports.$status.updates]),{filter:exports.$status.map(function(e){return e===t.Status.RUN})}),target:s}),o();
},{"effector":"Bgek","./types":"Qd94","./utils":"UldJ"}],"B6dB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("forest"),t=require("./parts"),n=require("./logic"),o=require("./types");function r(){window.addEventListener("keydown",function(e){return n.keydown(e.keyCode)}),t.Root(function(){t.GameScreen(function(){t.Board(function(){e.list(n.$cells,function(e){var n=e.store;return t.Cell({data:{type:n}})})}),t.Summary(function(){t.Info({text:n.$score.map(function(e){return"Score: "+e})})})}),t.StartScreen(function(){e.spec({data:{screen:"modal"},visible:n.$status.map(function(e){return e===o.Status.START})}),e.h("div",{text:"Snake game on Effector + Forest + Foliage",data:{fontSize:"big"}}),e.h("div",{text:"press any key to continue",data:{fontSize:"small"}})}),t.EndScreen(function(){e.spec({data:{screen:"modal"},visible:n.$status.map(function(e){return e===o.Status.END})}),e.h("div",{data:{fontSize:"big"},text:n.$score.map(function(e){return"Game over! Your final score: "+e})}),e.h("div",{data:{fontSize:"small"},text:"press any key to continue"})})})}e.using(document.body,r);
},{"forest":"DGGC","./parts":"gYtE","./logic":"eQwH","./types":"Qd94"}]},{},["B6dB"], null)
//# sourceMappingURL=/foliage-forest-snake/src.f10117fe.js.map